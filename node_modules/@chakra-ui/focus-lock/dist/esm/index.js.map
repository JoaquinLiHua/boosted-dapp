{"version":3,"sources":["../../src/index.tsx"],"names":["React","ReactFocusLock","__DEV__","getAllFocusable","focus","FocusLock","props","initialFocusRef","finalFocusRef","contentRef","restoreFocus","children","isDisabled","autoFocus","persistentFocus","onActivation","useCallback","current","focusables","length","onDeactivation","returnFocus","displayName"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAASC,OAAT,EAAkBC,eAAlB,EAAmCC,KAAnC,QAAgD,kBAAhD;;AAyCA;;;;;;AAMA,OAAO,IAAMC,SAAmC,GAAIC,KAAD,IAAW;AAC5D,MAAM;AACJC,IAAAA,eADI;AAEJC,IAAAA,aAFI;AAGJC,IAAAA,UAHI;AAIJC,IAAAA,YAJI;AAKJC,IAAAA,QALI;AAMJC,IAAAA,UANI;AAOJC,IAAAA,SAPI;AAQJC,IAAAA;AARI,MASFR,KATJ;AAWA,MAAMS,YAAY,GAAGf,KAAK,CAACgB,WAAN,CAAkB,MAAM;AAC3C,QAAIT,eAAJ,oBAAIA,eAAe,CAAEU,OAArB,EAA8B;AAC5BV,MAAAA,eAAe,CAACU,OAAhB,CAAwBb,KAAxB;AACD,KAFD,MAEO;AACL,UAAIK,UAAJ,oBAAIA,UAAU,CAAEQ,OAAhB,EAAyB;AACvB,YAAMC,UAAU,GAAGf,eAAe,CAACM,UAAU,CAACQ,OAAZ,CAAlC;;AACA,YAAIC,UAAU,CAACC,MAAX,KAAsB,CAA1B,EAA6B;AAC3Bf,UAAAA,KAAK,CAACK,UAAU,CAACQ,OAAZ,CAAL;AACD;AACF;AACF;AACF,GAXoB,EAWlB,CAACV,eAAD,EAAkBE,UAAlB,CAXkB,CAArB;AAaA,MAAMW,cAAc,GAAGpB,KAAK,CAACgB,WAAN,CAAkB,MAAM;AAAA;;AAC7CR,IAAAA,aAAa,QAAb,qCAAAA,aAAa,CAAES,OAAf,2CAAwBb,KAAxB;AACD,GAFsB,EAEpB,CAACI,aAAD,CAFoB,CAAvB;AAIA,MAAMa,WAAW,GAAGX,YAAY,IAAI,CAACF,aAArC;AAEA,sBACE,oBAAC,cAAD;AACE,IAAA,eAAe,EAAEM,eADnB;AAEE,IAAA,SAAS,EAAED,SAFb;AAGE,IAAA,QAAQ,EAAED,UAHZ;AAIE,IAAA,YAAY,EAAEG,YAJhB;AAKE,IAAA,cAAc,EAAEK,cALlB;AAME,IAAA,WAAW,EAAEC;AANf,KAQGV,QARH,CADF;AAYD,CA3CM;;AA6CP,IAAIT,OAAJ,EAAa;AACXG,EAAAA,SAAS,CAACiB,WAAV,GAAwB,WAAxB;AACD;;AAED,eAAejB,SAAf","sourcesContent":["import * as React from \"react\"\nimport ReactFocusLock from \"react-focus-lock\"\nimport { __DEV__, getAllFocusable, focus } from \"@chakra-ui/utils\"\n\nexport interface FocusLockProps {\n  /**\n   * `ref` of the element to receive focus initially\n   */\n  initialFocusRef?: React.RefObject<HTMLElement>\n  /**\n   * `ref` of the element to return focus to when `FocusLock`\n   * unmounts\n   */\n  finalFocusRef?: React.RefObject<HTMLElement>\n  /**\n   * The `ref` of the wrapper for which the focus-lock wraps\n   */\n  contentRef?: React.RefObject<HTMLElement>\n  /**\n   * If `true`, focus will be restored to the element that\n   * triggered the `FocusLock` once it unmounts\n   */\n  restoreFocus?: boolean\n  /**\n   * The component to render\n   */\n  children: React.ReactNode\n  /**\n   * If `true`, focus trapping will be disabled\n   */\n  isDisabled?: boolean\n  /**\n   * If `true`, the first focuable element within the `children`\n   * will ne auto-focused once `FocusLock` mounts\n   */\n  autoFocus?: boolean\n  /**\n   * If `true`, disables text selections inside, and outside focus lock.\n   * @default `false`\n   */\n  persistentFocus?: boolean\n}\n\n/**\n * React component to trap focus within an element or component.\n * Mostly used in Modals, Popovers, etc.\n *\n * @see Docs https://chakra-ui.com/components/focuslock\n */\nexport const FocusLock: React.FC<FocusLockProps> = (props) => {\n  const {\n    initialFocusRef,\n    finalFocusRef,\n    contentRef,\n    restoreFocus,\n    children,\n    isDisabled,\n    autoFocus,\n    persistentFocus,\n  } = props\n\n  const onActivation = React.useCallback(() => {\n    if (initialFocusRef?.current) {\n      initialFocusRef.current.focus()\n    } else {\n      if (contentRef?.current) {\n        const focusables = getAllFocusable(contentRef.current)\n        if (focusables.length === 0) {\n          focus(contentRef.current)\n        }\n      }\n    }\n  }, [initialFocusRef, contentRef])\n\n  const onDeactivation = React.useCallback(() => {\n    finalFocusRef?.current?.focus()\n  }, [finalFocusRef])\n\n  const returnFocus = restoreFocus && !finalFocusRef\n\n  return (\n    <ReactFocusLock\n      persistentFocus={persistentFocus}\n      autoFocus={autoFocus}\n      disabled={isDisabled}\n      onActivation={onActivation}\n      onDeactivation={onDeactivation}\n      returnFocus={returnFocus}\n    >\n      {children}\n    </ReactFocusLock>\n  )\n}\n\nif (__DEV__) {\n  FocusLock.displayName = \"FocusLock\"\n}\n\nexport default FocusLock\n"],"file":"index.js"}