{"version":3,"sources":["../../src/toast.tsx"],"names":["Toast","props","id","message","onCloseComplete","onRequestRemove","requestClose","position","duration","ref","React","useRef","useState","delay","setDelay","show","setShow","useEffect","onMouseEnter","onMouseLeave","onExited","close","style","useMemo","rect","height","isTop","includes","y","styles","init","opacity","transform","entered","exiting","enter","exit","willChange","pointerEvents","maxWidth","minWidth","onClose","__DEV__","displayName"],"mappings":"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","sourcesContent":["import { useTimeout } from \"@chakra-ui/hooks\"\nimport { Transition } from \"@chakra-ui/transition\"\nimport { isFunction, __DEV__ } from \"@chakra-ui/utils\"\nimport ReachAlert from \"@reach/alert\"\nimport { useRect } from \"@reach/rect\"\nimport * as React from \"react\"\nimport { ToastOptions } from \"./toast.types\"\nimport { getToastStyle } from \"./toast.utils\"\n\nexport interface ToastProps extends ToastOptions {\n  requestClose?: boolean\n}\n\nexport const Toast: React.FC<ToastProps> = (props) => {\n  const {\n    id,\n    message,\n    onCloseComplete,\n    onRequestRemove,\n    requestClose = false,\n    position = \"bottom\",\n    duration = 5000,\n  } = props\n\n  const ref = React.useRef<HTMLDivElement>(null)\n  const [delay, setDelay] = React.useState(duration)\n  const [show, setShow] = React.useState(true)\n\n  React.useEffect(() => {\n    setDelay(duration)\n  }, [duration])\n\n  const onMouseEnter = () => {\n    setDelay(null)\n  }\n\n  const onMouseLeave = () => {\n    setDelay(duration)\n  }\n\n  const onExited = () => {\n    if (!show) {\n      onRequestRemove()\n    }\n    onCloseComplete?.()\n  }\n\n  const close = () => {\n    setShow(false)\n  }\n\n  React.useEffect(() => {\n    if (requestClose) {\n      setShow(false)\n    }\n  }, [requestClose])\n\n  useTimeout(close, delay)\n\n  const style = React.useMemo(() => getToastStyle(position), [position])\n\n  const rect = useRect(ref)\n  const height = rect?.height ?? 0\n\n  const isTop = position.includes(\"top\")\n\n  /**\n   * @todo\n   *\n   * Make it possible to configure this toast transition\n   * from `theme.transitions.toast`\n   */\n  const y = isTop ? `-${height}px` : 0\n\n  const styles = {\n    init: {\n      opacity: 0,\n      height: 0,\n      transform: `translateY(${y}) scale(1)`,\n    },\n    entered: {\n      opacity: 1,\n      height,\n      transform: `translateY(0) scale(1)`,\n    },\n    exiting: {\n      opacity: 0,\n      height: 0,\n      transform: `translateY(0) scale(0.9)`,\n    },\n  }\n\n  return (\n    <Transition\n      styles={styles}\n      /**\n       * We use the `easeInOutQuint` from https://easings.net/en#\n       */\n      transition=\"all 0.3s cubic-bezier(0.23, 1, 0.32, 1)\"\n      in={show}\n      timeout={{ enter: 0, exit: 150 }}\n      onExited={onExited}\n    >\n      {(styles) => (\n        <div\n          data-toast=\"\"\n          onMouseEnter={onMouseEnter}\n          onMouseLeave={onMouseLeave}\n          style={{\n            willChange: \"transform, height, opacity\",\n            ...style,\n            ...styles,\n          }}\n        >\n          <div\n            ref={ref}\n            data-toast-inner=\"\"\n            style={{ pointerEvents: \"auto\", maxWidth: 560, minWidth: 300 }}\n          >\n            <ReachAlert>\n              {isFunction(message) ? message({ id, onClose: close }) : message}\n            </ReachAlert>\n          </div>\n        </div>\n      )}\n    </Transition>\n  )\n}\n\nif (__DEV__) {\n  Toast.displayName = \"Toast\"\n}\n"],"file":"toast.js"}