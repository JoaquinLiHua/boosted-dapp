{"version":3,"sources":["../../src/toast.tsx"],"names":["useTimeout","Transition","isFunction","__DEV__","ReachAlert","useRect","React","getToastStyle","Toast","props","id","message","onCloseComplete","onRequestRemove","requestClose","position","duration","ref","useRef","delay","setDelay","useState","show","setShow","useEffect","onMouseEnter","onMouseLeave","onExited","close","style","useMemo","rect","height","isTop","includes","y","styles","init","opacity","transform","entered","exiting","enter","exit","willChange","pointerEvents","maxWidth","minWidth","onClose","displayName"],"mappings":"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","sourcesContent":["import { useTimeout } from \"@chakra-ui/hooks\"\nimport { Transition } from \"@chakra-ui/transition\"\nimport { isFunction, __DEV__ } from \"@chakra-ui/utils\"\nimport ReachAlert from \"@reach/alert\"\nimport { useRect } from \"@reach/rect\"\nimport * as React from \"react\"\nimport { ToastOptions } from \"./toast.types\"\nimport { getToastStyle } from \"./toast.utils\"\n\nexport interface ToastProps extends ToastOptions {\n  requestClose?: boolean\n}\n\nexport const Toast: React.FC<ToastProps> = (props) => {\n  const {\n    id,\n    message,\n    onCloseComplete,\n    onRequestRemove,\n    requestClose = false,\n    position = \"bottom\",\n    duration = 5000,\n  } = props\n\n  const ref = React.useRef<HTMLDivElement>(null)\n  const [delay, setDelay] = React.useState(duration)\n  const [show, setShow] = React.useState(true)\n\n  React.useEffect(() => {\n    setDelay(duration)\n  }, [duration])\n\n  const onMouseEnter = () => {\n    setDelay(null)\n  }\n\n  const onMouseLeave = () => {\n    setDelay(duration)\n  }\n\n  const onExited = () => {\n    if (!show) {\n      onRequestRemove()\n    }\n    onCloseComplete?.()\n  }\n\n  const close = () => {\n    setShow(false)\n  }\n\n  React.useEffect(() => {\n    if (requestClose) {\n      setShow(false)\n    }\n  }, [requestClose])\n\n  useTimeout(close, delay)\n\n  const style = React.useMemo(() => getToastStyle(position), [position])\n\n  const rect = useRect(ref)\n  const height = rect?.height ?? 0\n\n  const isTop = position.includes(\"top\")\n\n  /**\n   * @todo\n   *\n   * Make it possible to configure this toast transition\n   * from `theme.transitions.toast`\n   */\n  const y = isTop ? `-${height}px` : 0\n\n  const styles = {\n    init: {\n      opacity: 0,\n      height: 0,\n      transform: `translateY(${y}) scale(1)`,\n    },\n    entered: {\n      opacity: 1,\n      height,\n      transform: `translateY(0) scale(1)`,\n    },\n    exiting: {\n      opacity: 0,\n      height: 0,\n      transform: `translateY(0) scale(0.9)`,\n    },\n  }\n\n  return (\n    <Transition\n      styles={styles}\n      /**\n       * We use the `easeInOutQuint` from https://easings.net/en#\n       */\n      transition=\"all 0.3s cubic-bezier(0.23, 1, 0.32, 1)\"\n      in={show}\n      timeout={{ enter: 0, exit: 150 }}\n      onExited={onExited}\n    >\n      {(styles) => (\n        <div\n          data-toast=\"\"\n          onMouseEnter={onMouseEnter}\n          onMouseLeave={onMouseLeave}\n          style={{\n            willChange: \"transform, height, opacity\",\n            ...style,\n            ...styles,\n          }}\n        >\n          <div\n            ref={ref}\n            data-toast-inner=\"\"\n            style={{ pointerEvents: \"auto\", maxWidth: 560, minWidth: 300 }}\n          >\n            <ReachAlert>\n              {isFunction(message) ? message({ id, onClose: close }) : message}\n            </ReachAlert>\n          </div>\n        </div>\n      )}\n    </Transition>\n  )\n}\n\nif (__DEV__) {\n  Toast.displayName = \"Toast\"\n}\n"],"file":"toast.js"}