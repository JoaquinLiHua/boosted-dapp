{"version":3,"sources":["../../src/live-region.ts"],"names":["LiveRegion","constructor","options","getOptions","region","getRegion","parentNode","appendChild","speak","message","clear","innerText","destroy","removeChild","defaultOptions","role","id","document","body","Object","assign","getElementById","createElement","setup","className","setAttribute","String","style","border","clip","height","width","margin","padding","overflow","whiteSpace","position"],"mappings":";;AAyCA,OAAO,MAAMA,UAAN,CAAiB;AAKtBC,EAAAA,WAAW,CAACC,OAAD,EAA8B;AAAA;;AAAA;;AAAA;;AACvC,SAAKA,OAAL,GAAeC,UAAU,CAACD,OAAD,CAAzB;AACA,SAAKE,MAAL,GAAcC,SAAS,CAAC,KAAKH,OAAN,CAAvB;AACA,SAAKI,UAAL,GAAkB,KAAKJ,OAAL,CAAaI,UAA/B;AACA,SAAKA,UAAL,CAAgBC,WAAhB,CAA4B,KAAKH,MAAjC;AACD;;AAEMI,EAAAA,KAAP,CAAaC,OAAb,EAA8B;AAC5B,SAAKC,KAAL;AACA,SAAKN,MAAL,CAAYO,SAAZ,GAAwBF,OAAxB;AACD;;AAEMG,EAAAA,OAAP,GAAiB;AAAA;;AACf,kCAAKR,MAAL,CAAYE,UAAZ,2CAAwBO,WAAxB,CAAoC,KAAKT,MAAzC;AACD;;AAEMM,EAAAA,KAAP,GAAe;AACb,SAAKN,MAAL,CAAYO,SAAZ,GAAwB,EAAxB;AACD;;AAvBqB;;AA0BxB,SAASR,UAAT,CAAoBD,OAApB,EAAiD;AAC/C,MAAMY,cAA2C,GAAG;AAClD,iBAAa,QADqC;AAElD,mBAAe,MAFmC;AAGlD,qBAAiB,KAHiC;AAIlDC,IAAAA,IAAI,EAAE,QAJ4C;AAKlDC,IAAAA,EAAE,EAAE,yBAL8C;AAMlDV,IAAAA,UAAU,EAAEW,QAAQ,CAACC;AAN6B,GAApD;;AAQA,MAAIhB,OAAJ,EAAa;AACX,WAAOiB,MAAM,CAACC,MAAP,CAAcN,cAAd,EAA8BZ,OAA9B,CAAP;AACD;;AACD,SAAOY,cAAP;AACD;;AAED,SAAST,SAAT,CAAmBH,OAAnB,EAAyD;AACvD,MAAIE,MAAM,GAAGa,QAAQ,CAACI,cAAT,CAAwBnB,OAAO,CAACc,EAAhC,CAAb;;AACA,MAAIZ,MAAJ,EAAY;AACV,WAAOA,MAAP;AACD,GAFD,MAEO;AACLA,IAAAA,MAAM,GAAGa,QAAQ,CAACK,aAAT,CAAuB,KAAvB,CAAT;AACAC,IAAAA,KAAK,CAACnB,MAAD,EAASF,OAAT,CAAL;AACA,WAAOE,MAAP;AACD;AACF;;AAED,SAASmB,KAAT,CAAenB,MAAf,EAAoCF,OAApC,EAA0E;AACxEE,EAAAA,MAAM,CAACY,EAAP,GAAYd,OAAO,CAACc,EAAR,IAAc,oBAA1B;AACAZ,EAAAA,MAAM,CAACoB,SAAP,GAAmB,sBAAnB;AACApB,EAAAA,MAAM,CAACqB,YAAP,CAAoB,WAApB,EAAiCvB,OAAO,CAAC,WAAD,CAAxC;AACAE,EAAAA,MAAM,CAACqB,YAAP,CAAoB,MAApB,EAA4BvB,OAAO,CAACa,IAApC;AACAX,EAAAA,MAAM,CAACqB,YAAP,CAAoB,eAApB,EAAqCvB,OAAO,CAAC,eAAD,CAA5C;AACAE,EAAAA,MAAM,CAACqB,YAAP,CAAoB,aAApB,EAAmCC,MAAM,CAACxB,OAAO,CAAC,aAAD,CAAR,CAAzC;AACAiB,EAAAA,MAAM,CAACC,MAAP,CAAchB,MAAM,CAACuB,KAArB,EAA4B;AAC1BC,IAAAA,MAAM,EAAE,KADkB;AAE1BC,IAAAA,IAAI,EAAE,0BAFoB;AAG1BC,IAAAA,MAAM,EAAE,KAHkB;AAI1BC,IAAAA,KAAK,EAAE,KAJmB;AAK1BC,IAAAA,MAAM,EAAE,MALkB;AAM1BC,IAAAA,OAAO,EAAE,KANiB;AAO1BC,IAAAA,QAAQ,EAAE,QAPgB;AAQ1BC,IAAAA,UAAU,EAAE,QARc;AAS1BC,IAAAA,QAAQ,EAAE;AATgB,GAA5B;AAWD;;AAED,eAAepC,UAAf","sourcesContent":["export interface LiveRegionOptions {\n  /**\n   * A unique id for the created live region element\n   */\n  id?: string\n  /**\n   * Used to mark a part of the page as \"live\" so that updates will\n   * be communicated to users by screen readers.\n   *\n   * - If set to `polite`: tells assistive technology to alert the user\n   * to this change when it has finished whatever it is currently doing\n   *\n   * - If set to `assertive`: tells assistive technology to interrupt whatever\n   * it's doing and alert the user to this change immediately\n   *\n   * @default \"polite\".\n   */\n  \"aria-live\"?: \"polite\" | \"assertive\"\n  /**\n   * The desired value of the role attribute\n   * @default \"status\"\n   */\n  role?: \"status\" | \"alert\" | \"log\"\n  /**\n   * Indicates what types of changes should be presented to the user.\n   * @default \"all\"\n   */\n  \"aria-relevant\"?: React.AriaAttributes[\"aria-relevant\"]\n  /**\n   * Indicates whether the entire region should be\n   * considered as a whole when communicating updates\n   *\n   * @default true\n   */\n  \"aria-atomic\"?: React.AriaAttributes[\"aria-atomic\"]\n  /**\n   * The node to append the live region node to\n   */\n  parentNode?: HTMLElement\n}\n\nexport class LiveRegion {\n  region: HTMLElement\n  options: Required<LiveRegionOptions>\n  parentNode: HTMLElement\n\n  constructor(options?: LiveRegionOptions) {\n    this.options = getOptions(options)\n    this.region = getRegion(this.options)\n    this.parentNode = this.options.parentNode\n    this.parentNode.appendChild(this.region)\n  }\n\n  public speak(message: string) {\n    this.clear()\n    this.region.innerText = message\n  }\n\n  public destroy() {\n    this.region.parentNode?.removeChild(this.region)\n  }\n\n  public clear() {\n    this.region.innerText = \"\"\n  }\n}\n\nfunction getOptions(options?: LiveRegionOptions) {\n  const defaultOptions: Required<LiveRegionOptions> = {\n    \"aria-live\": \"polite\",\n    \"aria-atomic\": \"true\",\n    \"aria-relevant\": \"all\",\n    role: \"status\",\n    id: \"chakra-a11y-live-region\",\n    parentNode: document.body,\n  }\n  if (options) {\n    return Object.assign(defaultOptions, options)\n  }\n  return defaultOptions\n}\n\nfunction getRegion(options: Required<LiveRegionOptions>) {\n  let region = document.getElementById(options.id)\n  if (region) {\n    return region\n  } else {\n    region = document.createElement(\"div\")\n    setup(region, options)\n    return region\n  }\n}\n\nfunction setup(region: HTMLElement, options: Required<LiveRegionOptions>) {\n  region.id = options.id || \"chakra-live-region\"\n  region.className = \"__chakra-live-region\"\n  region.setAttribute(\"aria-live\", options[\"aria-live\"])\n  region.setAttribute(\"role\", options.role)\n  region.setAttribute(\"aria-relevant\", options[\"aria-relevant\"])\n  region.setAttribute(\"aria-atomic\", String(options[\"aria-atomic\"]))\n  Object.assign(region.style, {\n    border: \"0px\",\n    clip: \"rect(0px, 0px, 0px, 0px)\",\n    height: \"1px\",\n    width: \"1px\",\n    margin: \"-1px\",\n    padding: \"0px\",\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\",\n    position: \"absolute\",\n  })\n}\n\nexport default LiveRegion\n"],"file":"live-region.js"}