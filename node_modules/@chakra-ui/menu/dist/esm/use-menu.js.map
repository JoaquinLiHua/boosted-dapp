{"version":3,"sources":["../../src/use-menu.ts"],"names":["useClickable","useDescendant","useDescendants","useControllableState","useDisclosure","useId","useIds","useShortcut","useUpdateEffect","usePopper","addItem","callAllHandlers","createContext","createOnKeyDown","cx","dataAttr","focus","getNextIndex","getNextItemFromSearch","getPrevIndex","getValidChildren","isArray","isString","mergeRefs","removeItem","useInteractOutside","useCallback","useState","useRef","cloneElement","MenuProvider","useMenuContext","strict","name","useMenu","props","id","closeOnSelect","closeOnBlur","autoSelect","placement","placementProp","gutter","fixed","preventOverflow","modifiers","isLazy","isOpen","onOpen","onClose","onToggle","menuRef","buttonRef","ref","onInteractOutside","event","current","contains","target","popper","reference","forceUpdate","focusedIndex","setFocusedIndex","domContext","preventScroll","buttonId","menuId","orientation","useMenuList","menu","descendants","onCharacterPress","preventDefault","key","onKeyDown","character","nextItem","node","element","textContent","index","indexOf","keyMap","Escape","ArrowDown","nextIndex","length","ArrowUp","prevIndex","children","className","tabIndex","role","hidden","style","useMenuButton","openAndFocusMenu","openAndFocusFirstItem","openAndFocusLastItem","lastIndex","onClick","action","Enter","useMenuItem","onClickProp","isDisabled","isFocusable","htmlProps","context","disabled","focusable","onMouseEnter","onMouseMove","document","activeElement","onMouseLeave","isFocused","trulyDisabled","tabbable","useMenuOption","type","isChecked","rest","ownProps","useMenuOptionGroup","value","valueProp","defaultValue","onChange","isRadio","fallback","setValue","handleChange","selectedValue","nextValue","includes","validChildren","clones","map","child","useMenuState"],"mappings":";;;;AAAA,SAASA,YAAT,QAA6B,sBAA7B;AACA,SAASC,aAAT,EAAwBC,cAAxB,QAA8C,uBAA9C;AACA,SACEC,oBADF,EAEEC,aAFF,EAGEC,KAHF,EAIEC,MAJF,EAKEC,WALF,EAMEC,eANF,QAOO,kBAPP;AAQA,SAASC,SAAT,QAA0C,mBAA1C;AACA,SACEC,OADF,EAEEC,eAFF,EAGEC,aAHF,EAIEC,eAJF,EAKEC,EALF,EAMEC,QANF,EAOEC,KAPF,EAQEC,YARF,EASEC,qBATF,EAUEC,YAVF,EAWEC,gBAXF,EAYEC,OAZF,EAaEC,QAbF,EAcEC,SAdF,EAeEC,UAfF,QAgBO,kBAhBP;AAiBA,SAASC,kBAAT,QAAmC,0BAAnC;AACA,SACEC,WADF,EAEEC,QAFF,EAIEC,MAJF,EAKEC,YALF,QAOO,OAPP;AASA,IAAM,CAACC,YAAD,EAAeC,cAAf,IAAiCnB,aAAa,CAAgB;AAClEoB,EAAAA,MAAM,EAAE,KAD0D;AAElEC,EAAAA,IAAI,EAAE;AAF4D,CAAhB,CAApD;AAKA,SAASH,YAAT,EAAuBC,cAAvB;;AAsDA;;;;;;AAMA,OAAO,SAASG,OAAT,CAAiBC,KAAjB,EAAsC;AAC3C,MAAM;AACJC,IAAAA,EADI;AAEJC,IAAAA,aAAa,GAAG,IAFZ;AAGJC,IAAAA,WAAW,GAAG,IAHV;AAIJC,IAAAA,UAAU,GAAG,IAJT;AAKJC,IAAAA,SAAS,EAAEC,aAAa,GAAG,cALvB;AAMJC,IAAAA,MANI;AAOJC,IAAAA,KAAK,GAAG,IAPJ;AAQJC,IAAAA,eARI;AASJC,IAAAA,SATI;AAUJC,IAAAA;AAVI,MAWFX,KAXJ;AAaA,MAAM;AAAEY,IAAAA,MAAF;AAAUC,IAAAA,MAAV;AAAkBC,IAAAA,OAAlB;AAA2BC,IAAAA;AAA3B,MAAwC9C,aAAa,CAAC+B,KAAD,CAA3D;AAEA;;;;AAGA,MAAMgB,OAAO,GAAGvB,MAAM,CAAiB,IAAjB,CAAtB;AACA,MAAMwB,SAAS,GAAGxB,MAAM,CAAoB,IAApB,CAAxB;AAEAH,EAAAA,kBAAkB,CAAC;AACjB4B,IAAAA,GAAG,EAAEF,OADY;AAEjBG,IAAAA,iBAAiB,EAAGC,KAAD,IAAW;AAAA;;AAC5B,UACEjB,WAAW,IACX,wBAACc,SAAS,CAACI,OAAX,qBAAC,mBAAmBC,QAAnB,CAA4BF,KAAK,CAACG,MAAlC,CAAD,CAFF,EAGE;AACAT,QAAAA,OAAO;AACR;AACF;AATgB,GAAD,CAAlB;AAYA;;;;AAGA,MAAM;AAAET,IAAAA,SAAF;AAAamB,IAAAA,MAAb;AAAqBC,IAAAA;AAArB,MAAmCnD,SAAS,CAAC;AACjD+B,IAAAA,SAAS,EAAEC,aADsC;AAEjDE,IAAAA,KAFiD;AAGjDkB,IAAAA,WAAW,EAAEd,MAHoC;AAIjDL,IAAAA,MAJiD;AAKjDE,IAAAA,eALiD;AAMjDC,IAAAA;AANiD,GAAD,CAAlD;AASA,MAAM,CAACiB,YAAD,EAAeC,eAAf,IAAkCpC,QAAQ,CAAC,CAAC,CAAF,CAAhD;AAEA;;;;AAGA,MAAMqC,UAAU,GAAG9D,cAAc,EAAjC;AAEA;;;;AAGAM,EAAAA,eAAe,CAAC,MAAM;AACpB,QAAI,CAACuC,MAAL,EAAa;AACXgB,MAAAA,eAAe,CAAC,CAAC,CAAF,CAAf;;AACA,UAAIX,SAAS,CAACI,OAAd,EAAuB;AACrBxC,QAAAA,KAAK,CAACoC,SAAS,CAACI,OAAX,EAAoB;AACvBS,UAAAA,aAAa,EAAE;AADQ,SAApB,CAAL;AAGD;AACF;AACF,GATc,EASZ,CAAClB,MAAD,CATY,CAAf;AAWA;;;;AAGA,MAAM,CAACmB,QAAD,EAAWC,MAAX,IAAqB7D,MAAM,CAAC8B,EAAD,6BAAjC;AAEA,SAAO;AACL4B,IAAAA,UADK;AAELL,IAAAA,MAFK;AAGLnB,IAAAA,SAHK;AAILoB,IAAAA,SAJK;AAKLM,IAAAA,QALK;AAMLC,IAAAA,MANK;AAOLC,IAAAA,WAAW,EAAE,UAPR;AAQLrB,IAAAA,MARK;AASLG,IAAAA,QATK;AAULF,IAAAA,MAVK;AAWLC,IAAAA,OAXK;AAYLE,IAAAA,OAZK;AAaLC,IAAAA,SAbK;AAcLU,IAAAA,YAdK;AAeLzB,IAAAA,aAfK;AAgBLC,IAAAA,WAhBK;AAiBLC,IAAAA,UAjBK;AAkBLwB,IAAAA,eAlBK;AAmBLjB,IAAAA;AAnBK,GAAP;AAqBD;AAeD,OAAO,SAASuB,WAAT,CAAqBlC,KAArB,EAA8C;AACnD,MAAMmC,IAAI,GAAGvC,cAAc,EAA3B;AAEA,MAAM;AACJ+B,IAAAA,YADI;AAEJC,IAAAA,eAFI;AAGJZ,IAAAA,OAHI;AAIJJ,IAAAA,MAJI;AAKJE,IAAAA,OALI;AAMJU,IAAAA,MANI;AAOJQ,IAAAA,MAPI;AAQJ3B,IAAAA,SARI;AASJwB,IAAAA,UAAU,EAAE;AAAEO,MAAAA;AAAF,KATR;AAUJzB,IAAAA;AAVI,MAWFwB,IAXJ;AAaA;;;;;AAIA,MAAME,gBAAgB,GAAGjE,WAAW,CAAC;AACnCkE,IAAAA,cAAc,EAAGlB,KAAD,IAAWA,KAAK,CAACmB,GAAN,KAAc;AADN,GAAD,CAApC;AAIA,MAAMC,SAAS,GAAG9D,eAAe,CAAC;AAChC8D,IAAAA,SAAS,EAAEH,gBAAgB,CAAEI,SAAD,IAAe;AACzC;;;;AAIA,UAAMC,QAAQ,GAAG3D,qBAAqB,CACpCqD,WADoC,EAEpCK,SAFoC,EAGnCE,IAAD;AAAA;;AAAA,eAAU,kBAAAA,IAAI,CAACC,OAAL,mCAAcC,WAAd,KAA6B,EAAvC;AAAA,OAHoC,EAIpCT,WAAW,CAACT,YAAD,CAJyB,CAAtC;;AAOA,UAAIe,QAAJ,EAAc;AACZ,YAAMI,KAAK,GAAGV,WAAW,CAACW,OAAZ,CAAoBL,QAApB,CAAd;AACAd,QAAAA,eAAe,CAACkB,KAAD,CAAf;AACD;AACF,KAhB0B,CADK;AAkBhCE,IAAAA,MAAM,EAAE;AACNC,MAAAA,MAAM,EAAEnC,OADF;AAENoC,MAAAA,SAAS,EAAE,MAAM;AACf,YAAMC,SAAS,GAAGrE,YAAY,CAAC6C,YAAD,EAAeS,WAAW,CAACgB,MAA3B,CAA9B;AACAxB,QAAAA,eAAe,CAACuB,SAAD,CAAf;AACD,OALK;AAMNE,MAAAA,OAAO,EAAE,MAAM;AACb,YAAMC,SAAS,GAAGtE,YAAY,CAAC2C,YAAD,EAAeS,WAAW,CAACgB,MAA3B,CAA9B;AACAxB,QAAAA,eAAe,CAAC0B,SAAD,CAAf;AACD;AATK;AAlBwB,GAAD,CAAjC;AA+BA,sBACKtD,KADL;AAEEuD,IAAAA,QAAQ,EAAE5C,MAAM,GAAIC,MAAM,GAAGZ,KAAK,CAACuD,QAAT,GAAoB,IAA9B,GAAsCvD,KAAK,CAACuD,QAF9D;AAGEC,IAAAA,SAAS,EAAE7E,EAAE,CAAC,wBAAD,EAA2BqB,KAAK,CAACwD,SAAjC,CAHf;AAIEtC,IAAAA,GAAG,EAAE9B,SAAS,CAAC4B,OAAD,EAAUQ,MAAM,CAACN,GAAjB,CAJhB;AAKEuC,IAAAA,QAAQ,EAAE,CAAC,CALb;AAMEC,IAAAA,IAAI,EAAE,MANR;AAOEzD,IAAAA,EAAE,EAAE+B,MAPN;AAQE2B,IAAAA,MAAM,EAAE,CAAC/C,MARX;AASE,wBAAoB,UATtB;AAUE,sBAAkBP,SAVpB;AAWEuD,IAAAA,KAAK,eAAO5D,KAAK,CAAC4D,KAAb,EAAuBpC,MAAM,CAACoC,KAA9B,CAXP;AAYEpB,IAAAA,SAAS,EAAEhE,eAAe,CAACwB,KAAK,CAACwC,SAAP,EAAkBA,SAAlB;AAZ5B;AAcD;AAED;;;;;;;;AAWA,OAAO,SAASqB,aAAT,CAAuB7D,KAAvB,EAAkD;AACvD,MAAMmC,IAAI,GAAGvC,cAAc,EAA3B;AAEA,MAAM;AACJgC,IAAAA,eADI;AAEJf,IAAAA,MAFI;AAGJD,IAAAA,MAHI;AAIJE,IAAAA,OAJI;AAKJV,IAAAA,UALI;AAMJY,IAAAA,OANI;AAOJa,IAAAA,UAAU,EAAE;AAAEO,MAAAA;AAAF;AAPR,MAQFD,IARJ;AAUA,MAAM2B,gBAAgB,GAAGvE,WAAW,CAAC,MAAM;AACzCsB,IAAAA,MAAM;;AACN,QAAIG,OAAO,CAACK,OAAZ,EAAqB;AACnBxC,MAAAA,KAAK,CAACmC,OAAO,CAACK,OAAT,CAAL;AACD;AACF,GALmC,EAKjC,CAACR,MAAD,EAASG,OAAT,CALiC,CAApC;AAOA,MAAM+C,qBAAqB,GAAGxE,WAAW,CAAC,MAAM;AAC9CsB,IAAAA,MAAM;AACNe,IAAAA,eAAe,CAAC,CAAD,CAAf;AACD,GAHwC,EAGtC,CAACf,MAAD,EAASe,eAAT,CAHsC,CAAzC;AAKA,MAAMoC,oBAAoB,GAAGzE,WAAW,CAAC,MAAM;AAC7CsB,IAAAA,MAAM;AACN,QAAMoD,SAAS,GAAG7B,WAAW,CAACgB,MAAZ,GAAqB,CAAvC;AACAxB,IAAAA,eAAe,CAACqC,SAAD,CAAf;AACD,GAJuC,EAIrC,CAACpD,MAAD,EAASe,eAAT,EAA0BQ,WAA1B,CAJqC,CAAxC;AAMA,MAAM8B,OAAO,GAAG3E,WAAW,CAAC,MAAM;AAChC,QAAIqB,MAAJ,EAAY;AACVE,MAAAA,OAAO;AACR,KAFD,MAEO;AACL,UAAMqD,MAAM,GAAG/D,UAAU,GAAG2D,qBAAH,GAA2BD,gBAApD;AACAK,MAAAA,MAAM;AACP;AACF,GAP0B,EAOxB,CAAC/D,UAAD,EAAaQ,MAAb,EAAqBE,OAArB,EAA8BiD,qBAA9B,EAAqDD,gBAArD,CAPwB,CAA3B;AASA,MAAMtB,SAAS,GAAG9D,eAAe,CAAC;AAChCsE,IAAAA,MAAM,EAAE;AACNoB,MAAAA,KAAK,EAAEL,qBADD;AAENb,MAAAA,SAAS,EAAEa,qBAFL;AAGNV,MAAAA,OAAO,EAAEW;AAHH;AADwB,GAAD,CAAjC;AAQA,sBACKhE,KADL;AAEEkB,IAAAA,GAAG,EAAE9B,SAAS,CAAC+C,IAAI,CAAClB,SAAN,EAAiBkB,IAAI,CAACV,SAAL,CAAeP,GAAhC,CAFhB;AAGEsC,IAAAA,SAAS,EAAE7E,EAAE,CAAC,0BAAD,EAA6BqB,KAAK,CAACwD,SAAnC,CAHf;AAIEvD,IAAAA,EAAE,EAAEkC,IAAI,CAACJ,QAJX;AAKE,mBAAenD,QAAQ,CAACuD,IAAI,CAACvB,MAAN,CALzB;AAME,qBAAiBuB,IAAI,CAACvB,MANxB;AAOE,qBAAiB,MAPnB;AAQE,qBAAiBuB,IAAI,CAACH,MARxB;AASEkC,IAAAA,OAAO,EAAE1F,eAAe,CAACwB,KAAK,CAACkE,OAAP,EAAgBA,OAAhB,CAT1B;AAUE1B,IAAAA,SAAS,EAAEhE,eAAe,CAACwB,KAAK,CAACwC,SAAP,EAAkBA,SAAlB;AAV5B;AAYD;AAQD,OAAO,SAAS6B,WAAT,CAAqBrE,KAArB,EAA8C;AACnD,MAAM;AAEJkE,IAAAA,OAAO,EAAEI,WAFL;AAGJC,IAAAA,UAHI;AAIJC,IAAAA;AAJI,MAMFxE,KANJ;AAAA,MAKKyE,SALL,iCAMIzE,KANJ;;AAQA,MAAMmC,IAAI,GAAGvC,cAAc,EAA3B;AAEA,MAAM;AACJiC,IAAAA,UADI;AAEJD,IAAAA,eAFI;AAGJD,IAAAA,YAHI;AAIJzB,IAAAA,aAJI;AAKJY,IAAAA,OALI;AAMJE,IAAAA;AANI,MAOFmB,IAPJ;AASA,MAAMjB,GAAG,GAAGzB,MAAM,CAAiB,IAAjB,CAAlB;AACA,MAAMQ,EAAE,iBAAe/B,KAAK,EAA5B;AAEA;;;;AAGA,MAAM4E,KAAK,GAAGhF,aAAa,CAAC;AAC1B8E,IAAAA,OAAO,EAAE1B,GAAG,CAACG,OADa;AAE1BqD,IAAAA,OAAO,EAAE7C,UAFiB;AAG1B8C,IAAAA,QAAQ,EAAEJ,UAHgB;AAI1BK,IAAAA,SAAS,EAAEJ;AAJe,GAAD,CAA3B;AAOA,MAAMK,YAAY,GAAGtF,WAAW,CAAC,MAAM;AACrC,QAAIgF,UAAJ,EAAgB;AAChB3C,IAAAA,eAAe,CAACkB,KAAD,CAAf;AACD,GAH+B,EAG7B,CAAClB,eAAD,EAAkBkB,KAAlB,EAAyByB,UAAzB,CAH6B,CAAhC;AAKA,MAAMO,WAAW,GAAGvF,WAAW,CAAC,MAAM;AACpC,QAAIwF,QAAQ,CAACC,aAAT,KAA2B9D,GAAG,CAACG,OAAnC,EAA4C;AAC1CwD,MAAAA,YAAY;AACb;AACF,GAJ8B,EAI5B,CAACA,YAAD,CAJ4B,CAA/B;AAMA,MAAMI,YAAY,GAAG1F,WAAW,CAAC,MAAM;AACrC,QAAIgF,UAAJ,EAAgB;AAChB3C,IAAAA,eAAe,CAAC,CAAC,CAAF,CAAf;AACD,GAH+B,EAG7B,CAACA,eAAD,EAAkB2C,UAAlB,CAH6B,CAAhC;AAKA,MAAML,OAAO,GAAG3E,WAAW,CACxB6B,KAAD,IAAuB;AACrBkD,IAAAA,WAAW,QAAX,YAAAA,WAAW,CAAGlD,KAAH,CAAX;AACA;;;;AAGA,QAAIlB,aAAJ,EAAmB;AACjBY,MAAAA,OAAO;AACR;AACF,GATwB,EAUzB,CAACA,OAAD,EAAUwD,WAAV,EAAuBpE,aAAvB,CAVyB,CAA3B;AAaA,MAAMgF,SAAS,GAAGpC,KAAK,KAAKnB,YAA5B;AAEA,MAAMwD,aAAa,GAAGZ,UAAU,IAAI,CAACC,WAArC;AAEAnG,EAAAA,eAAe,CAAC,MAAM;AACpB,QAAI6G,SAAS,IAAI,CAACC,aAAlB,EAAiC;AAC/B,UAAIjE,GAAG,CAACG,OAAR,EAAiB;AACfxC,QAAAA,KAAK,CAACqC,GAAG,CAACG,OAAL,CAAL;AACD;AACF,KAJD,MAIO;AACL,UAAI0D,QAAQ,CAACC,aAAT,KAA2BhE,OAAO,CAACK,OAAvC,EAAgD;AAAA;;AAC9C,4BAAAL,OAAO,CAACK,OAAR,sCAAiBxC,KAAjB;AACD;AACF;AACF,GAVc,EAUZ,CAACqG,SAAD,EAAYC,aAAZ,EAA2BnE,OAA3B,CAVY,CAAf;AAYA,MAAMoE,QAAQ,GAAGvH,YAAY,CAAC;AAC5BqG,IAAAA,OAD4B;AAE5BW,IAAAA,YAF4B;AAG5BC,IAAAA,WAH4B;AAI5BG,IAAAA,YAJ4B;AAK5B/D,IAAAA,GAL4B;AAM5BqD,IAAAA,UAN4B;AAO5BC,IAAAA;AAP4B,GAAD,CAA7B;AAUA,sBACKC,SADL,EAEKW,QAFL;AAGE5B,IAAAA,SAAS,EAAE7E,EAAE,CAAC,uBAAD,EAA0B8F,SAAS,CAACjB,SAApC,CAHf;AAIEvD,IAAAA,EAJF;AAKEyD,IAAAA,IAAI,EAAE,UALR;AAMED,IAAAA,QAAQ,EAAEyB,SAAS,GAAG,CAAH,GAAO,CAAC;AAN7B;AAQD;AAaD,OAAO,SAASG,aAAT,CAAuBrF,KAAvB,EAAkD;AACvD,MAAM;AAEJkE,IAAAA,OAFI;AAGJK,IAAAA,UAHI;AAIJC,IAAAA,WAJI;AAKJc,IAAAA,IAAI,GAAG,OALH;AAMJC,IAAAA;AANI,MAQFvF,KARJ;AAAA,MAOKwF,IAPL,iCAQIxF,KARJ;;AAUA,MAAMyF,QAAQ,GAAGpB,WAAW,CAAC;AAC3BE,IAAAA,UAD2B;AAE3BC,IAAAA,WAF2B;AAG3BN,IAAAA;AAH2B,GAAD,CAA5B;AAMA,sBACKsB,IADL,EAEKC,QAFL;AAGEjC,IAAAA,SAAS,EAAE7E,EAAE,CAAC,8BAAD,EAAiC6G,IAAI,CAAChC,SAAtC,CAHf;AAIEE,IAAAA,IAAI,eAAa4B,IAJnB;AAKE,oBAAgBC;AALlB;AAOD;AAWD,OAAO,SAASG,kBAAT,CAA4B1F,KAA5B,EAA4D;AACjE,MAAM;AACJuD,IAAAA,QADI;AAEJ+B,IAAAA,IAAI,GAAG,OAFH;AAGJK,IAAAA,KAAK,EAAEC,SAHH;AAIJC,IAAAA,YAJI;AAKJC,IAAAA;AALI,MAOF9F,KAPJ;AAAA,MAMKyE,SANL,iCAOIzE,KAPJ;;AASA,MAAM+F,OAAO,GAAGT,IAAI,KAAK,OAAzB;AAEA,MAAMU,QAAQ,GAAGD,OAAO,GAAG,EAAH,GAAQ,EAAhC;AAEA,MAAM,CAACJ,KAAD,EAAQM,QAAR,IAAoBjI,oBAAoB,CAAC;AAC7C6H,IAAAA,YAAY,EAAEA,YAAF,WAAEA,YAAF,GAAkBG,QADe;AAE7CL,IAAAA,KAAK,EAAEC,SAFsC;AAG7CE,IAAAA;AAH6C,GAAD,CAA9C;AAMA,MAAMI,YAAY,GAAG3G,WAAW,CAC7B4G,aAAD,IAA2B;AACzB,QAAIb,IAAI,KAAK,OAAT,IAAoBnG,QAAQ,CAACwG,KAAD,CAAhC,EAAyC;AACvCM,MAAAA,QAAQ,CAACE,aAAD,CAAR;AACD;;AAED,QAAIb,IAAI,KAAK,UAAT,IAAuBpG,OAAO,CAACyG,KAAD,CAAlC,EAA2C;AACzC,UAAMS,SAAS,GAAGT,KAAK,CAACU,QAAN,CAAeF,aAAf,IACd9G,UAAU,CAACsG,KAAD,EAAQQ,aAAR,CADI,GAEd5H,OAAO,CAACoH,KAAD,EAAQQ,aAAR,CAFX;AAIAF,MAAAA,QAAQ,CAACG,SAAD,CAAR;AACD;AACF,GAb6B,EAc9B,CAACT,KAAD,EAAQM,QAAR,EAAkBX,IAAlB,CAd8B,CAAhC;AAiBA,MAAMgB,aAAa,GAAGrH,gBAAgB,CAACsE,QAAD,CAAtC;AAEA,MAAMgD,MAAM,GAAGD,aAAa,CAACE,GAAd,CAAmBC,KAAD,IAAW;AAC1C,QAAMvC,OAAO,GAAI9C,KAAD,IAAuB;AACrC8E,MAAAA,YAAY,CAACO,KAAK,CAACzG,KAAN,CAAY2F,KAAb,CAAZ;AACAc,MAAAA,KAAK,CAACzG,KAAN,CAAYkE,OAAZ,oBAAAuC,KAAK,CAACzG,KAAN,CAAYkE,OAAZ,CAAsB9C,KAAtB;AACD,KAHD;;AAKA,QAAMmE,SAAS,GACbD,IAAI,KAAK,OAAT,GACImB,KAAK,CAACzG,KAAN,CAAY2F,KAAZ,KAAsBA,KAD1B,GAEIA,KAAK,CAACU,QAAN,CAAeI,KAAK,CAACzG,KAAN,CAAY2F,KAA3B,CAHN;AAKA,wBAAOjG,YAAY,CAAC+G,KAAD,EAAQ;AACzBnB,MAAAA,IADyB;AAEzBpB,MAAAA,OAFyB;AAGzBqB,MAAAA;AAHyB,KAAR,CAAnB;AAKD,GAhBc,CAAf;AAkBA,sBACKd,SADL;AAEEjB,IAAAA,SAAS,EAAE7E,EAAE,CAAC,2BAAD,EAA8B8F,SAAS,CAACjB,SAAxC,CAFf;AAGED,IAAAA,QAAQ,EAAEgD;AAHZ;AAKD;AAED,OAAO,SAASG,YAAT,GAAwB;AAC7B,MAAM;AAAE9F,IAAAA,MAAF;AAAUE,IAAAA;AAAV,MAAsBlB,cAAc,EAA1C;AACA,SAAO;AAAEgB,IAAAA,MAAF;AAAUE,IAAAA;AAAV,GAAP;AACD","sourcesContent":["import { useClickable } from \"@chakra-ui/clickable\"\nimport { useDescendant, useDescendants } from \"@chakra-ui/descendant\"\nimport {\n  useControllableState,\n  useDisclosure,\n  useId,\n  useIds,\n  useShortcut,\n  useUpdateEffect,\n} from \"@chakra-ui/hooks\"\nimport { usePopper, UsePopperProps } from \"@chakra-ui/popper\"\nimport {\n  addItem,\n  callAllHandlers,\n  createContext,\n  createOnKeyDown,\n  cx,\n  dataAttr,\n  focus,\n  getNextIndex,\n  getNextItemFromSearch,\n  getPrevIndex,\n  getValidChildren,\n  isArray,\n  isString,\n  mergeRefs,\n  removeItem,\n} from \"@chakra-ui/utils\"\nimport { useInteractOutside } from \"@react-aria/interactions\"\nimport React, {\n  useCallback,\n  useState,\n  HTMLAttributes,\n  useRef,\n  cloneElement,\n  MouseEvent,\n} from \"react\"\n\nconst [MenuProvider, useMenuContext] = createContext<UseMenuReturn>({\n  strict: false,\n  name: \"MenuContext\",\n})\n\nexport { MenuProvider, useMenuContext }\n\nexport interface UseMenuProps extends UsePopperProps {\n  /**\n   * Unique id to be used by menu and it's children\n   */\n  id?: string\n  /**\n   * If `true`, the menu will close when a menu item is\n   * clicked\n   *\n   * @default true\n   */\n  closeOnSelect?: boolean\n  /**\n   * If `true`, the menu will close when you click outside\n   * the menu list\n   */\n  closeOnBlur?: boolean\n  /**\n   * If `true`, the first enabled menu item will be selected\n   * when the menu opens.\n   *\n   * @default true\n   */\n  autoSelect?: boolean\n  /**\n   * The Popper.js modifiers to use\n   */\n  modifiers?: UsePopperProps[\"modifiers\"]\n  /**\n   * Performance 🚀:\n   * If `true`, the MenuItem rendering will be deferred\n   * until the menu is open.\n   */\n  isLazy?: boolean\n  /**\n   * If `true`, the top-level menu will be opened in controlled mode\n   */\n  isOpen?: boolean\n  /**\n   * If `true`, the top-level menu will be opened in un-controlled mode\n   */\n  defaultIsOpen?: boolean\n  /**\n   * Function to be called when menu is open\n   */\n  onOpen?: () => void\n  /**\n   * Function to be called when menu is closed\n   */\n  onClose?: () => void\n}\n\n/**\n * React Hook to manage a menu\n *\n * It provides the logic and will be used with react context\n * to propagate it's return value to all children\n */\nexport function useMenu(props: UseMenuProps) {\n  const {\n    id,\n    closeOnSelect = true,\n    closeOnBlur = true,\n    autoSelect = true,\n    placement: placementProp = \"bottom-start\",\n    gutter,\n    fixed = true,\n    preventOverflow,\n    modifiers,\n    isLazy,\n  } = props\n\n  const { isOpen, onOpen, onClose, onToggle } = useDisclosure(props)\n\n  /**\n   * Prepare the reference to the menu and disclosure\n   */\n  const menuRef = useRef<HTMLDivElement>(null)\n  const buttonRef = useRef<HTMLButtonElement>(null)\n\n  useInteractOutside({\n    ref: menuRef,\n    onInteractOutside: (event) => {\n      if (\n        closeOnBlur &&\n        !buttonRef.current?.contains(event.target as HTMLElement)\n      ) {\n        onClose()\n      }\n    },\n  })\n\n  /**\n   * Add some popper.js for dynamic positioning\n   */\n  const { placement, popper, reference } = usePopper({\n    placement: placementProp,\n    fixed,\n    forceUpdate: isOpen,\n    gutter,\n    preventOverflow,\n    modifiers,\n  })\n\n  const [focusedIndex, setFocusedIndex] = useState(-1)\n\n  /**\n   * Context to register all menu item nodes\n   */\n  const domContext = useDescendants<HTMLDivElement, {}>()\n\n  /**\n   * Focus the button when we close the menu\n   */\n  useUpdateEffect(() => {\n    if (!isOpen) {\n      setFocusedIndex(-1)\n      if (buttonRef.current) {\n        focus(buttonRef.current, {\n          preventScroll: true,\n        })\n      }\n    }\n  }, [isOpen])\n\n  /**\n   * Generate unique ids for menu's list and button\n   */\n  const [buttonId, menuId] = useIds(id, `menu-button`, `menu-list`)\n\n  return {\n    domContext,\n    popper,\n    placement,\n    reference,\n    buttonId,\n    menuId,\n    orientation: \"vertical\",\n    isOpen,\n    onToggle,\n    onOpen,\n    onClose,\n    menuRef,\n    buttonRef,\n    focusedIndex,\n    closeOnSelect,\n    closeOnBlur,\n    autoSelect,\n    setFocusedIndex,\n    isLazy,\n  }\n}\n\nexport interface UseMenuReturn extends ReturnType<typeof useMenu> {}\n\n/**\n * React Hook to manage a menu list.\n *\n * The assumption here is that the `useMenu` hook is used\n * in a component higher up the tree, and it's return value\n * is passed as `context` to this hook.\n */\n\nexport interface UseMenuListProps\n  extends Omit<HTMLAttributes<Element>, \"color\"> {}\n\nexport function useMenuList(props: UseMenuListProps) {\n  const menu = useMenuContext()\n\n  const {\n    focusedIndex,\n    setFocusedIndex,\n    menuRef,\n    isOpen,\n    onClose,\n    popper,\n    menuId,\n    placement,\n    domContext: { descendants },\n    isLazy,\n  } = menu\n\n  /**\n   * Hook that creates a keydown event handler that listens\n   * to printable keyboard character press\n   */\n  const onCharacterPress = useShortcut({\n    preventDefault: (event) => event.key !== \" \",\n  })\n\n  const onKeyDown = createOnKeyDown({\n    onKeyDown: onCharacterPress((character) => {\n      /**\n       * Typeahead: Based on current character pressed,\n       * find the next item to be selected\n       */\n      const nextItem = getNextItemFromSearch(\n        descendants,\n        character,\n        (node) => node.element?.textContent || \"\",\n        descendants[focusedIndex],\n      )\n\n      if (nextItem) {\n        const index = descendants.indexOf(nextItem)\n        setFocusedIndex(index)\n      }\n    }),\n    keyMap: {\n      Escape: onClose,\n      ArrowDown: () => {\n        const nextIndex = getNextIndex(focusedIndex, descendants.length)\n        setFocusedIndex(nextIndex)\n      },\n      ArrowUp: () => {\n        const prevIndex = getPrevIndex(focusedIndex, descendants.length)\n        setFocusedIndex(prevIndex)\n      },\n    },\n  })\n\n  return {\n    ...props,\n    children: isLazy ? (isOpen ? props.children : null) : props.children,\n    className: cx(\"chakra-menu__menu-list\", props.className),\n    ref: mergeRefs(menuRef, popper.ref),\n    tabIndex: -1,\n    role: \"menu\",\n    id: menuId,\n    hidden: !isOpen,\n    \"aria-orientation\": \"vertical\" as React.AriaAttributes[\"aria-orientation\"],\n    \"data-placement\": placement,\n    style: { ...props.style, ...popper.style },\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n}\n\n/**\n * React Hook to manage a menu button.\n *\n * The assumption here is that the `useMenu` hook is used\n * in a component higher up the tree, and it's return value\n * is passed as `context` to this hook.\n */\n\nexport interface UseMenuButtonProps\n  extends Omit<HTMLAttributes<Element>, \"color\"> {}\n\nexport function useMenuButton(props: UseMenuButtonProps) {\n  const menu = useMenuContext()\n\n  const {\n    setFocusedIndex,\n    onOpen,\n    isOpen,\n    onClose,\n    autoSelect,\n    menuRef,\n    domContext: { descendants },\n  } = menu\n\n  const openAndFocusMenu = useCallback(() => {\n    onOpen()\n    if (menuRef.current) {\n      focus(menuRef.current)\n    }\n  }, [onOpen, menuRef])\n\n  const openAndFocusFirstItem = useCallback(() => {\n    onOpen()\n    setFocusedIndex(0)\n  }, [onOpen, setFocusedIndex])\n\n  const openAndFocusLastItem = useCallback(() => {\n    onOpen()\n    const lastIndex = descendants.length - 1\n    setFocusedIndex(lastIndex)\n  }, [onOpen, setFocusedIndex, descendants])\n\n  const onClick = useCallback(() => {\n    if (isOpen) {\n      onClose()\n    } else {\n      const action = autoSelect ? openAndFocusFirstItem : openAndFocusMenu\n      action()\n    }\n  }, [autoSelect, isOpen, onClose, openAndFocusFirstItem, openAndFocusMenu])\n\n  const onKeyDown = createOnKeyDown({\n    keyMap: {\n      Enter: openAndFocusFirstItem,\n      ArrowDown: openAndFocusFirstItem,\n      ArrowUp: openAndFocusLastItem,\n    },\n  })\n\n  return {\n    ...props,\n    ref: mergeRefs(menu.buttonRef, menu.reference.ref),\n    className: cx(\"chakra-menu__menu-button\", props.className),\n    id: menu.buttonId,\n    \"data-active\": dataAttr(menu.isOpen),\n    \"aria-expanded\": menu.isOpen,\n    \"aria-haspopup\": \"menu\" as React.AriaAttributes[\"aria-haspopup\"],\n    \"aria-controls\": menu.menuId,\n    onClick: callAllHandlers(props.onClick, onClick),\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n}\n\nexport interface UseMenuItemProps\n  extends Omit<HTMLAttributes<Element>, \"color\"> {\n  isDisabled?: boolean\n  isFocusable?: boolean\n}\n\nexport function useMenuItem(props: UseMenuItemProps) {\n  const {\n    onMouseOut: onMouseOutProp,\n    onClick: onClickProp,\n    isDisabled,\n    isFocusable,\n    ...htmlProps\n  } = props\n\n  const menu = useMenuContext()\n\n  const {\n    domContext,\n    setFocusedIndex,\n    focusedIndex,\n    closeOnSelect,\n    onClose,\n    menuRef,\n  } = menu\n\n  const ref = useRef<HTMLDivElement>(null)\n  const id = `menuitem-${useId()}`\n\n  /**\n   * Register the menuitem's node into the domContext\n   */\n  const index = useDescendant({\n    element: ref.current,\n    context: domContext,\n    disabled: isDisabled,\n    focusable: isFocusable,\n  })\n\n  const onMouseEnter = useCallback(() => {\n    if (isDisabled) return\n    setFocusedIndex(index)\n  }, [setFocusedIndex, index, isDisabled])\n\n  const onMouseMove = useCallback(() => {\n    if (document.activeElement !== ref.current) {\n      onMouseEnter()\n    }\n  }, [onMouseEnter])\n\n  const onMouseLeave = useCallback(() => {\n    if (isDisabled) return\n    setFocusedIndex(-1)\n  }, [setFocusedIndex, isDisabled])\n\n  const onClick = useCallback(\n    (event: MouseEvent) => {\n      onClickProp?.(event)\n      /**\n       * Close menu and parent menu's if `closeOnSelect` is set to `true`\n       */\n      if (closeOnSelect) {\n        onClose()\n      }\n    },\n    [onClose, onClickProp, closeOnSelect],\n  )\n\n  const isFocused = index === focusedIndex\n\n  const trulyDisabled = isDisabled && !isFocusable\n\n  useUpdateEffect(() => {\n    if (isFocused && !trulyDisabled) {\n      if (ref.current) {\n        focus(ref.current)\n      }\n    } else {\n      if (document.activeElement !== menuRef.current) {\n        menuRef.current?.focus()\n      }\n    }\n  }, [isFocused, trulyDisabled, menuRef])\n\n  const tabbable = useClickable({\n    onClick,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    ref,\n    isDisabled,\n    isFocusable,\n  })\n\n  return {\n    ...htmlProps,\n    ...tabbable,\n    className: cx(\"chakra-menu__menuitem\", htmlProps.className),\n    id,\n    role: \"menuitem\",\n    tabIndex: isFocused ? 0 : -1,\n  }\n}\n\nexport interface UseMenuOptionOptions {\n  value?: string\n  isChecked?: boolean\n  type?: \"radio\" | \"checkbox\"\n  children?: React.ReactNode\n}\n\nexport interface UseMenuOptionProps\n  extends UseMenuItemProps,\n    UseMenuOptionOptions {}\n\nexport function useMenuOption(props: UseMenuOptionProps) {\n  const {\n    onMouseOut,\n    onClick,\n    isDisabled,\n    isFocusable,\n    type = \"radio\",\n    isChecked,\n    ...rest\n  } = props\n\n  const ownProps = useMenuItem({\n    isDisabled,\n    isFocusable,\n    onClick,\n  })\n\n  return {\n    ...rest,\n    ...ownProps,\n    className: cx(\"chakra-menu__menuitem-option\", rest.className),\n    role: `menuitem${type}`,\n    \"aria-checked\": isChecked as React.AriaAttributes[\"aria-checked\"],\n  }\n}\n\nexport interface UseMenuOptionGroupProps {\n  value?: string | string[]\n  defaultValue?: string | string[]\n  type?: \"radio\" | \"checkbox\"\n  onChange?: (value: string | string[]) => void\n  children?: React.ReactNode\n  className?: string\n}\n\nexport function useMenuOptionGroup(props: UseMenuOptionGroupProps) {\n  const {\n    children,\n    type = \"radio\",\n    value: valueProp,\n    defaultValue,\n    onChange,\n    ...htmlProps\n  } = props\n\n  const isRadio = type === \"radio\"\n\n  const fallback = isRadio ? \"\" : []\n\n  const [value, setValue] = useControllableState({\n    defaultValue: defaultValue ?? fallback,\n    value: valueProp,\n    onChange,\n  })\n\n  const handleChange = useCallback(\n    (selectedValue: string) => {\n      if (type === \"radio\" && isString(value)) {\n        setValue(selectedValue)\n      }\n\n      if (type === \"checkbox\" && isArray(value)) {\n        const nextValue = value.includes(selectedValue)\n          ? removeItem(value, selectedValue)\n          : addItem(value, selectedValue)\n\n        setValue(nextValue)\n      }\n    },\n    [value, setValue, type],\n  )\n\n  const validChildren = getValidChildren(children)\n\n  const clones = validChildren.map((child) => {\n    const onClick = (event: MouseEvent) => {\n      handleChange(child.props.value)\n      child.props.onClick?.(event)\n    }\n\n    const isChecked =\n      type === \"radio\"\n        ? child.props.value === value\n        : value.includes(child.props.value)\n\n    return cloneElement(child, {\n      type,\n      onClick,\n      isChecked,\n    })\n  })\n\n  return {\n    ...htmlProps,\n    className: cx(\"chakra-menu__option-group\", htmlProps.className),\n    children: clones,\n  }\n}\n\nexport function useMenuState() {\n  const { isOpen, onClose } = useMenuContext()\n  return { isOpen, onClose }\n}\n"],"file":"use-menu.js"}