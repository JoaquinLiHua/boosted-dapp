{"version":3,"sources":["../../src/css.ts"],"names":["get","isArray","isObject","isResponsiveObjectLike","objectToArrayNotation","runIfFn","merge","pseudoSelectors","parser","defaultBreakpoints","getBreakpoints","theme","breakpoints","responsive","styles","computedStyles","mediaQueries","map","n","key","value","queries","slice","length","index","media","css","args","props","styleObject","k","x","val","config","apply","scale","transform","properties","p","property"],"mappings":"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","sourcesContent":["import {\n  Dict,\n  get,\n  isArray,\n  isObject,\n  isResponsiveObjectLike,\n  objectToArrayNotation,\n  runIfFn,\n  merge,\n} from \"@chakra-ui/utils\"\nimport { pseudoSelectors } from \"./pseudo\"\nimport { parser } from \"./parser\"\nimport { StyleObjectOrFn, CSSObject } from \"./css.types\"\n\nconst defaultBreakpoints = [\"40em\", \"52em\", \"64em\"]\n\nfunction getBreakpoints(theme: any) {\n  const breakpoints = theme?.breakpoints ?? defaultBreakpoints\n  return breakpoints as string[]\n}\n\nconst responsive = (styles: any) => (theme?: any) => {\n  const computedStyles: any = {}\n  const breakpoints = getBreakpoints(theme)\n  const mediaQueries = [\n    null,\n    ...breakpoints.map((n) => `@media screen and (min-width: ${n})`),\n  ]\n\n  for (const key in styles) {\n    let value = runIfFn(styles[key], theme ?? {})\n    if (value == null) continue\n\n    value = isResponsiveObjectLike(value) ? objectToArrayNotation(value) : value\n\n    if (!isArray(value)) {\n      computedStyles[key] = value\n      continue\n    }\n\n    const queries = value.slice(0, mediaQueries.length).length\n\n    for (let index = 0; index < queries; index++) {\n      const media = mediaQueries[index]\n      if (!media) {\n        computedStyles[key] = value[index]\n        continue\n      }\n      computedStyles[media] = computedStyles[media] || {}\n      if (value[index] == null) continue\n      computedStyles[media][key] = value[index]\n    }\n  }\n\n  return computedStyles\n}\n\ntype PropsOrTheme = Dict | { theme: Dict }\n\nexport const css = (args: StyleObjectOrFn = {}) => (\n  props: PropsOrTheme = {},\n) => {\n  const theme = \"theme\" in props ? props.theme : props\n\n  let computedStyles: CSSObject = {}\n\n  const styleObject = runIfFn(args, theme)\n  const styles = responsive(styleObject)(theme)\n\n  for (const k in styles) {\n    const x = styles[k]\n    const key = k in pseudoSelectors ? pseudoSelectors[k] : k\n\n    const val = runIfFn(x, theme)\n\n    const config = (parser.config as Dict)[key]\n\n    if (key === \"apply\") {\n      const apply = css(get(theme, val))(theme)\n      computedStyles = merge({}, computedStyles, apply)\n      continue\n    }\n\n    if (isObject(val)) {\n      computedStyles[key] = css(val)(theme)\n      continue\n    }\n\n    const scale = get(theme, config?.scale, {})\n    const value = config?.transform?.(val, scale) ?? get(scale, val, val)\n\n    if (config?.properties) {\n      for (const p of config?.properties) {\n        computedStyles[p] = value\n      }\n      continue\n    }\n\n    if (config?.property) {\n      computedStyles[config?.property] = value\n      continue\n    }\n\n    computedStyles[key] = value\n  }\n\n  return computedStyles\n}\n"],"file":"css.js"}