{"version":3,"sources":["../../src/keydown.ts"],"names":["createOnKeyDown","options","keyMap","onKey","stopPropagation","onKeyDown","shouldKeyDown","preventDefault","event","finalKeyMap","shouldPreventDefault","shouldStopPropagation","eventKey","action"],"mappings":";;;;;AAIA;;AACA;;AALA;AACA;AAsCO,SAASA,eAAT,CAAyBC,OAAzB,EAA0D;AAAA,MAE7DC,MAF6D,GAQ3DD,OAR2D,CAE7DC,MAF6D;AAAA,MAG7DC,KAH6D,GAQ3DF,OAR2D,CAG7DE,KAH6D;AAAA,MAI7DC,eAJ6D,GAQ3DH,OAR2D,CAI7DG,eAJ6D;AAAA,MAK7DC,SAL6D,GAQ3DJ,OAR2D,CAK7DI,SAL6D;AAAA,8BAQ3DJ,OAR2D,CAM7DK,aAN6D;AAAA,MAM7DA,aAN6D,sCAM7C;AAAA,WAAM,IAAN;AAAA,GAN6C;AAAA,8BAQ3DL,OAR2D,CAO7DM,cAP6D;AAAA,MAO7DA,cAP6D,sCAO5C,IAP4C;AAU/D,SAAO,UAACC,KAAD,EAAgC;AACrC,QAAI,CAACN,MAAL,EAAa;AAEb,QAAMO,WAAW,GAAG,uBAAQP,MAAR,EAAgBM,KAAhB,CAApB;AACA,QAAME,oBAAoB,GAAG,uBAAQH,cAAR,EAAwBC,KAAxB,CAA7B;AACA,QAAMG,qBAAqB,GAAG,uBAAQP,eAAR,EAAyBI,KAAzB,CAA9B;AAEA,QAAMI,QAAQ,GAAG,4BAAkBJ,KAAlB,CAAjB;;AAEA,QAAII,QAAQ,IAAIH,WAAhB,EAA6B;AAC3B,UAAMI,MAAM,GAAGJ,WAAW,CAACG,QAAD,CAA1B;;AAEA,UAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCP,aAAa,CAACE,KAAD,CAAjD,EAA0D;AACxD,YAAIE,oBAAJ,EAA0BF,KAAK,CAACD,cAAN;AAC1B,YAAII,qBAAJ,EAA2BH,KAAK,CAACJ,eAAN;AAC3BD,QAAAA,KAAK,QAAL,YAAAA,KAAK,CAAGK,KAAH,CAAL;AACAK,QAAAA,MAAM,CAACL,KAAD,CAAN;AACA;AACD;AACF;;AAEDH,IAAAA,SAAS,QAAT,YAAAA,SAAS,CAAGG,KAAH,CAAT;AACD,GAtBD;AAuBD","sourcesContent":["// Credit goes to Diego Haz for this one\n// https://github.com/reakit/reakit/blob/master/packages/reakit-utils/src/createOnKeyDown.ts\n\nimport * as React from \"react\"\nimport { runIfFn } from \"./function\"\nimport { normalizeEventKey } from \"./dom\"\n\ntype EventKeys =\n  | \"ArrowDown\"\n  | \"ArrowUp\"\n  | \"ArrowLeft\"\n  | \"ArrowRight\"\n  | \"Enter\"\n  | \"Space\"\n  | \"Tab\"\n  | \"Backspace\"\n  | \"Control\"\n  | \"Meta\"\n  | \"Home\"\n  | \"End\"\n  | \"PageDown\"\n  | \"PageUp\"\n  | \"Delete\"\n  | \"Escape\"\n  | \" \"\n  | \"Shift\"\n\ntype KeyMapReturn = (event: React.KeyboardEvent) => any\ntype KeyMap = Partial<Record<EventKeys, KeyMapReturn>>\n\nexport interface CreateOnKeyDownOptions {\n  keyMap?: KeyMap\n  onKey?: (event: React.KeyboardEvent) => any\n  preventDefault?: boolean | ((event: React.KeyboardEvent) => boolean)\n  stopPropagation?: boolean | ((event: React.KeyboardEvent) => boolean)\n  onKeyDown?: (event: React.KeyboardEvent) => void\n  shouldKeyDown?: (event: React.KeyboardEvent) => boolean\n}\n\nexport function createOnKeyDown(options: CreateOnKeyDownOptions) {\n  const {\n    keyMap,\n    onKey,\n    stopPropagation,\n    onKeyDown,\n    shouldKeyDown = () => true,\n    preventDefault = true,\n  } = options\n\n  return (event: React.KeyboardEvent) => {\n    if (!keyMap) return\n\n    const finalKeyMap = runIfFn(keyMap, event)\n    const shouldPreventDefault = runIfFn(preventDefault, event)\n    const shouldStopPropagation = runIfFn(stopPropagation, event)\n\n    const eventKey = normalizeEventKey(event)\n\n    if (eventKey in finalKeyMap) {\n      const action = finalKeyMap[eventKey as EventKeys]\n\n      if (typeof action === \"function\" && shouldKeyDown(event)) {\n        if (shouldPreventDefault) event.preventDefault()\n        if (shouldStopPropagation) event.stopPropagation()\n        onKey?.(event)\n        action(event)\n        return\n      }\n    }\n\n    onKeyDown?.(event)\n  }\n}\n"],"file":"keydown.js"}