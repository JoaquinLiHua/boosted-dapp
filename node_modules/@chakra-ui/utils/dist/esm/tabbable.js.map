{"version":3,"sources":["../../src/tabbable.ts"],"names":["hasDisplayNone","element","window","getComputedStyle","display","hasTabIndex","hasAttribute","hasNegativeTabIndex","tabIndex","isDisabled","Boolean","getAttribute","hasFocusWithin","document","activeElement","contains","isHTMLElement","HTMLElement","isHidden","parentElement","hidden","isContentEditable","value","isFocusable","localName","focusableTags","indexOf","others","a","audio","video","isTabbable","isActiveElement","isInputElement","tagName","toLowerCase","focus","options","isActive","preventScroll","requestAnimationFrame","select"],"mappings":"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","sourcesContent":["// Really great work done by Diego Haz on this one\n// https://github.com/reakit/reakit/blob/master/packages/reakit-utils/src/tabbable.ts\n\nexport const hasDisplayNone = (element: Element) =>\n  window.getComputedStyle(element).display === \"none\"\n\nexport const hasTabIndex = (element: Element) =>\n  element.hasAttribute(\"tabindex\")\n\nexport const hasNegativeTabIndex = (element: HTMLElement) =>\n  hasTabIndex(element) && element.tabIndex === -1\n\nexport function isDisabled(element: HTMLElement) {\n  return (\n    Boolean(element.getAttribute(\"disabled\")) == true ||\n    Boolean(element.getAttribute(\"aria-disabled\")) == true\n  )\n}\n\nexport function hasFocusWithin(element: Element) {\n  if (!document.activeElement) return false\n  return element.contains(document.activeElement)\n}\n\nexport function isHTMLElement(element: Element): element is HTMLElement {\n  return element instanceof HTMLElement\n}\n\nexport function isHidden(element: HTMLElement) {\n  if (element.parentElement && isHidden(element.parentElement)) return true\n  return element.hidden\n}\n\nexport function isContentEditable(element: HTMLElement) {\n  const value = element.getAttribute(\"contenteditable\")\n  return value !== \"false\" && value != null\n}\n\nexport function isFocusable(element: Element) {\n  if (!isHTMLElement(element) || isHidden(element) || isDisabled(element)) {\n    return false\n  }\n\n  const { localName } = element\n  const focusableTags = [\"input\", \"select\", \"textarea\", \"button\"]\n  if (focusableTags.indexOf(localName) >= 0) return true\n\n  const others = {\n    a: () => element.hasAttribute(\"href\"),\n    audio: () => element.hasAttribute(\"controls\"),\n    video: () => element.hasAttribute(\"controls\"),\n  }\n\n  if (localName in others) {\n    return others[localName as keyof typeof others]()\n  }\n\n  if (isContentEditable(element)) return true\n\n  return hasTabIndex(element)\n}\n\nexport function isTabbable(element: Element) {\n  return (\n    isHTMLElement(element) &&\n    isFocusable(element) &&\n    !hasNegativeTabIndex(element)\n  )\n}\n\nconst isActiveElement = (element: Element) => document.activeElement === element\n\nfunction isInputElement(element: HTMLElement): element is HTMLInputElement {\n  return (\n    isHTMLElement(element) &&\n    element.tagName.toLowerCase() === \"input\" &&\n    \"select\" in element\n  )\n}\n\ninterface FocusProps extends FocusOptions {\n  isActive?: typeof isActiveElement\n}\n\nexport function focus(element: HTMLElement, options: FocusProps = {}) {\n  const { isActive = isActiveElement, preventScroll } = options\n\n  if (isActive(element)) return -1\n\n  return requestAnimationFrame(() => {\n    element.focus({ preventScroll })\n\n    if (isInputElement(element)) {\n      element.select()\n    }\n  })\n}\n"],"file":"tabbable.js"}