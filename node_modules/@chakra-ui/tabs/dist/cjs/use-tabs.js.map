{"version":3,"sources":["../../src/use-tabs.ts"],"names":["useTabs","props","defaultIndex","onChange","index","isManual","orientation","htmlProps","focusedIndex","setFocusedIndex","defaultValue","value","shouldUpdate","prevIndex","nextIndex","propsMap","selectedIndex","setSelectedIndex","enabledDomContext","domContext","id","name","errorMessage","TabsProvider","useTabsContext","useTabList","count","descendants","length","setIndex","tab","element","focus","nextTab","prevTab","firstTab","lastTab","isHorizontal","isVertical","onKeyDown","keyMap","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Home","End","role","useTab","isDisabled","isFocusable","ref","enabledIndex","disabled","Boolean","focusable","context","current","isSelected","onClick","onFocus","isDisabledButFocusable","shouldSelect","clickable","type","makeTabId","tabIndex","undefined","makeTabPanelId","useTabPanels","validChildren","children","map","child","useTabPanel","hidden","useTabIndicator","left","width","top","height","rect","setRect","hasMeasured","setHasMeasured","tabRect","getBoundingClientRect","frameId","requestAnimationFrame","cancelAnimationFrame","position","transition"],"mappings":"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","sourcesContent":["import { useClickable, UseClickableProps } from \"@chakra-ui/clickable\"\nimport { useDescendant, useDescendants } from \"@chakra-ui/descendant\"\nimport {\n  useControllableState,\n  useId,\n  useSafeLayoutEffect,\n} from \"@chakra-ui/hooks\"\nimport {\n  callAllHandlers,\n  createOnKeyDown,\n  Dict,\n  getValidChildren,\n  isUndefined,\n  mergeRefs,\n  createContext,\n} from \"@chakra-ui/utils\"\nimport {\n  cloneElement,\n  useState,\n  useRef,\n  useEffect,\n  ReactNode,\n  ReactElement,\n  KeyboardEventHandler,\n  FocusEventHandler,\n  ButtonHTMLAttributes,\n  Ref,\n  CSSProperties,\n} from \"react\"\n\nexport interface UseTabsProps {\n  /**\n   * The orientation of the tab list.\n   */\n  orientation?: \"vertical\" | \"horizontal\"\n  /**\n   * If `true`, the tabs will be manually activated and\n   * display its panel by pressing Space or Enter.\n   *\n   * If `false`, the tabs will be automatically activated\n   * and their panel is displayed when they receive focus.\n   */\n  isManual?: boolean\n  /**\n   * Callback when the index (controlled or un-controlled) changes.\n   */\n  onChange?: (index: number) => void\n  /**\n   * The index of the selected tab (in controlled mode)\n   */\n  index?: number\n  /**\n   * The initial index of the selected tab (in uncontrolled mode)\n   */\n  defaultIndex?: number\n  /**\n   * The id of the tab\n   */\n  id?: string\n}\n\n/**\n * Tabs hooks that provides all the states, and accessibility\n * helpers to keep all things working properly.\n *\n * It's returned object will be passed unto a Context Provider\n * so all child components can read from it.\n *\n * @see Docs https://chakra-ui.com/components/useTabs\n */\nexport function useTabs(props: UseTabsProps) {\n  const {\n    defaultIndex,\n    onChange,\n    index,\n    isManual,\n    orientation = \"horizontal\",\n    ...htmlProps\n  } = props\n\n  /**\n   * We use this to keep track of the index of the focused tab.\n   *\n   * Tabs can be automatically activated, this means selection follows focus.\n   * When we navigate with the arrow keys, we move focus and selection to next/prev tab\n   *\n   * Tabs can also be manually activated, this means selection does not follow focus.\n   * When we navigate with the arrow keys, we only move focus NOT selection. The user\n   * will need not manually activate the tab using `Enter` or `Space`.\n   *\n   * This is why we need to keep track of the `focusedIndex` and `selectedIndex`\n   */\n  const [focusedIndex, setFocusedIndex] = useState(defaultIndex ?? 0)\n\n  const [selectedIndex, setSelectedIndex] = useControllableState({\n    defaultValue: defaultIndex ?? 0,\n    value: index,\n    onChange,\n    shouldUpdate: (prevIndex, nextIndex) => prevIndex !== nextIndex,\n    propsMap: {\n      value: \"index\",\n      defaultValue: \"defaultIndex\",\n    },\n  })\n\n  /**\n   * Sync focused `index` with controlled `selectedIndex` (which is the `props.index`)\n   */\n  useEffect(() => {\n    if (!isUndefined(index)) {\n      setFocusedIndex(index)\n    }\n  }, [index])\n\n  /**\n   * Think of `useDescendants` as a register for the tab nodes.\n   *\n   * This manager is used to store only the tab nodes that are not disabled, and focusable.\n   * If we have the following code\n   *\n   * ```jsx\n   * <Tab>Tab 1</Tab>\n   * <Tab isDisabled>Tab 2</Tab>\n   * <Tab>Tab 3</Tab>\n   * ```\n   *\n   * The manager will only hold references to \"Tab 1\" and \"Tab 3\", since `Tab 2` is disabled\n   */\n  const enabledDomContext = useDescendants()\n\n  /**\n   * This manager is used to store all tab nodes whether disabled or not.\n   * If we have the following code\n   *\n   * ```jsx\n   * <Tab>Tab 1</Tab>\n   * <Tab isDisabled>Tab 2</Tab>\n   * <Tab>Tab 3</Tab>\n   * ```\n   *\n   * The manager will only hold references to \"Tab 1\", \"Tab 2\" \"Tab 3\".\n   *\n   * We need this for correct indexing of tabs in event a tab is disabled\n   */\n  const domContext = useDescendants()\n\n  /**\n   * generate a unique id or use user-provided id for\n   * the tabs widget\n   */\n  const id = useId(props.id, `tabs`)\n\n  return {\n    id,\n    selectedIndex,\n    focusedIndex,\n    setSelectedIndex,\n    setFocusedIndex,\n    isManual,\n    orientation,\n    enabledDomContext,\n    domContext,\n    htmlProps,\n  }\n}\n\nexport type UseTabsReturn = Omit<ReturnType<typeof useTabs>, \"htmlProps\">\n\nconst [TabsProvider, useTabsContext] = createContext<UseTabsReturn>({\n  name: \"TabsContext\",\n  errorMessage:\n    \"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />\",\n})\n\nexport { TabsProvider }\n\ntype Child = ReactElement<any>\n\nexport interface UseTabListProps {\n  children?: ReactNode\n  onKeyDown?: KeyboardEventHandler\n  ref?: Ref<any>\n}\n\n/**\n * Tabs hook to manage multiple tab buttons,\n * and ensures only one tab is selected per time.\n *\n * @param props props object for the tablist\n */\nexport function useTabList<P extends UseTabListProps>(props: P) {\n  const {\n    setFocusedIndex,\n    focusedIndex,\n    orientation,\n    enabledDomContext,\n  } = useTabsContext()\n\n  const count = enabledDomContext.descendants.length\n\n  /**\n   * Function to update the selected tab index\n   */\n  const setIndex = (index: number) => {\n    const tab = enabledDomContext.descendants[index]\n    if (tab?.element) {\n      tab.element.focus()\n      setFocusedIndex(index)\n    }\n  }\n\n  // Helper functions for keyboard navigation\n  const nextTab = () => {\n    const nextIndex = (focusedIndex + 1) % count\n    setIndex(nextIndex)\n  }\n\n  const prevTab = () => {\n    const prevIndex = (focusedIndex - 1 + count) % count\n    setIndex(prevIndex)\n  }\n\n  const firstTab = () => setIndex(0)\n\n  const lastTab = () => setIndex(count - 1)\n\n  const isHorizontal = orientation === \"horizontal\"\n  const isVertical = orientation === \"vertical\"\n\n  const onKeyDown = createOnKeyDown({\n    keyMap: {\n      ArrowRight: () => isHorizontal && nextTab(),\n      ArrowLeft: () => isHorizontal && prevTab(),\n      ArrowDown: () => isVertical && nextTab(),\n      ArrowUp: () => isVertical && prevTab(),\n      Home: () => firstTab(),\n      End: () => lastTab(),\n    },\n  })\n\n  return {\n    ...props,\n    role: \"tablist\",\n    \"aria-orientation\": orientation,\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n}\n\nexport type UseTabListReturn = ReturnType<typeof useTabList>\n\nexport interface UseTabOptions {\n  id?: string\n  isSelected?: boolean\n  panelId?: string\n}\n\nexport interface UseTabProps\n  extends Omit<UseClickableProps, \"color\">,\n    UseTabOptions {}\n\n/**\n * Tabs hook to manage each tab button.\n *\n * A tab can be disabled and focusable, or both,\n * hence the use of `useClickable` to handle this scenario\n */\nexport function useTab<P extends UseTabProps>(\n  props: P,\n): ButtonHTMLAttributes<any> {\n  const { isDisabled, isFocusable, ...htmlProps } = props\n\n  const {\n    setSelectedIndex,\n    isManual,\n    id,\n    setFocusedIndex,\n    enabledDomContext,\n    domContext,\n    selectedIndex,\n  } = useTabsContext()\n\n  const ref = useRef<HTMLElement>(null)\n\n  /**\n   * Think of `useDescendant` as the function that registers tab node\n   * to the `enabledDomContext`, and returns it's index.\n   *\n   * Tab is registered if it's enabled or focusable\n   */\n  const enabledIndex = useDescendant({\n    disabled: Boolean(isDisabled),\n    focusable: Boolean(isFocusable),\n    context: enabledDomContext,\n    element: ref.current,\n  })\n\n  /**\n   * Registers all tabs (whether disabled or not)\n   */\n  const index = useDescendant({\n    context: domContext,\n    element: ref.current,\n  })\n\n  const isSelected = index === selectedIndex\n\n  const onClick = () => {\n    setFocusedIndex(enabledIndex)\n    setSelectedIndex(index)\n  }\n\n  const onFocus = () => {\n    const isDisabledButFocusable = isDisabled && isFocusable\n    const shouldSelect = !isManual && !isDisabledButFocusable\n\n    if (shouldSelect) {\n      setSelectedIndex(index)\n    }\n  }\n\n  const clickable = useClickable({\n    ...htmlProps,\n    ref: mergeRefs(ref, props.ref),\n    isDisabled,\n    isFocusable,\n    onClick: callAllHandlers(props.onClick, onClick),\n  })\n\n  const type: \"button\" | \"submit\" | \"reset\" = \"button\"\n\n  return {\n    ...clickable,\n    id: makeTabId(id, index),\n    role: \"tab\",\n    tabIndex: isSelected ? 0 : -1,\n    type,\n    \"aria-selected\": isSelected ? true : undefined,\n    \"aria-controls\": makeTabPanelId(id, index),\n    onFocus: callAllHandlers(props.onFocus, onFocus),\n  }\n}\n\nexport interface UseTabPanelsProps {\n  children?: ReactNode\n}\n\n/**\n * Tabs hook for managing the visibility of multiple tab panels.\n *\n * Since only one panel can be show at a time, we use `cloneElement`\n * to inject `selected` panel to each TabPanel.\n *\n * It returns a cloned version of it's children with\n * all functionality included.\n */\nexport function useTabPanels<P extends UseTabPanelsProps>(props: P) {\n  const context = useTabsContext()\n\n  const { id, selectedIndex } = context\n\n  const validChildren = getValidChildren(props.children)\n\n  const children = validChildren.map((child, index) =>\n    cloneElement(child as Child, {\n      isSelected: index === selectedIndex,\n      id: makeTabPanelId(id, index),\n    }),\n  )\n\n  return { ...props, children }\n}\n\n/**\n * Tabs hook for managing the visible/hidden states\n * of the tab panel.\n *\n * @param props props object for the tab panel\n */\nexport function useTabPanel(props: Dict) {\n  const { isSelected, id, ...htmlProps } = props\n  return {\n    ...htmlProps,\n    role: \"tabpanel\",\n    hidden: !isSelected,\n    id,\n  }\n}\n\n/**\n * Tabs hook to show an animated indicators that\n * follows the active tab.\n *\n * The way we do it is by measuring the DOM Rect (or dimensions)\n * of the active tab, and return that as CSS style for\n * the indicator.\n */\nexport function useTabIndicator(): CSSProperties {\n  const context = useTabsContext()\n\n  const { selectedIndex, orientation, domContext } = context\n\n  const isHorizontal = orientation === \"horizontal\"\n  const isVertical = orientation === \"vertical\"\n\n  // Get the clientRect of the selected tab\n  const [rect, setRect] = useState(() => {\n    if (isHorizontal) return { left: 0, width: 0 }\n    if (isVertical) return { top: 0, height: 0 }\n  })\n\n  const [hasMeasured, setHasMeasured] = useState(false)\n\n  // Update the selected tab rect when the selectedIndex changes\n  useSafeLayoutEffect(() => {\n    if (isUndefined(selectedIndex)) return\n\n    const tab = domContext.descendants[selectedIndex]\n    const tabRect = tab?.element?.getBoundingClientRect()\n\n    // Horizontal Tab: Calculate width and left distance\n    if (isHorizontal && tabRect) {\n      const { left, width } = tabRect\n      setRect({ left, width })\n    }\n\n    // Vertical Tab: Calculate height and top distance\n    if (isVertical && tabRect) {\n      const { top, height } = tabRect\n      setRect({ top, height })\n    }\n\n    // Prevent unwanted transition from 0 to measured rect\n    // by setting the measured state in the next tick\n    const frameId = requestAnimationFrame(() => {\n      setHasMeasured(true)\n    })\n\n    return () => {\n      cancelAnimationFrame(frameId)\n    }\n  }, [selectedIndex, isHorizontal, isVertical, domContext.descendants])\n\n  return {\n    position: \"absolute\",\n    transition: hasMeasured ? \"all 200ms cubic-bezier(0, 0, 0.2, 1)\" : \"none\",\n    ...rect,\n  }\n}\n\nfunction makeTabId(id: string, index: number) {\n  return `${id}--tab-${index}`\n}\n\nfunction makeTabPanelId(id: string, index: number) {\n  return `${id}--tabpanel-${index}`\n}\n"],"file":"use-tabs.js"}