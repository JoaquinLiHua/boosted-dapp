{"version":3,"sources":["../../src/storage-manager.ts"],"names":["isStorageSupported","Storage","storageKey","localStorageManager","get","init","exist","window","localStorage","getItem","value","set","setItem","cookieStorageManager","cookies","match","RegExp","document","cookie"],"mappings":";;;;AAEA,IAAMA,kBAAkB,GAAG,OAAOC,OAAP,KAAmB,WAA9C;AACO,IAAMC,UAAU,GAAG,sBAAnB;;;AAOP;;;AAGO,IAAMC,mBAAmC,GAAG;AACjDC,EAAAA,GADiD,eAC7CC,IAD6C,EACtC;AACT,QAAMC,KAAK,GACTN,kBAAkB,IAAI,CAAC,CAACO,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BP,UAA5B,CAD1B;AAGA,QAAMQ,KAAK,GAAGJ,KAAK,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BP,UAA5B,CAAH,GAA6CG,IAAhE;AAEA,WAAOK,KAAP;AACD,GARgD;AASjDC,EAAAA,GATiD,eAS7CD,KAT6C,EAStC;AACT,QAAIV,kBAAJ,EAAwB;AACtBO,MAAAA,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4BV,UAA5B,EAAwCQ,KAAxC;AACD;AACF;AAbgD,CAA5C;AAgBP;;;;;;AAGO,IAAMG,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,OAAD;AAAA,SAAsC;AACxEV,IAAAA,GADwE,eACpEC,IADoE,EAC7D;AACT,UAAMU,KAAK,GAAGD,OAAO,CAACC,KAAR,CAAc,IAAIC,MAAJ,WAAmBd,UAAnB,cAAd,CAAd;AAEA,UAAMQ,KAAK,GAAGK,KAAK,GAAGA,KAAK,CAAC,CAAD,CAAR,GAAcV,IAAjC;AAEA,aAAOK,KAAP;AACD,KAPuE;AAQxEC,IAAAA,GARwE,eAQpED,KARoE,EAQ7D;AACTO,MAAAA,QAAQ,CAACC,MAAT,GAAqBhB,UAArB,SAAmCQ,KAAnC;AACD;AAVuE,GAAtC;AAAA,CAA7B","sourcesContent":["import { ColorMode } from \"./color-mode.utils\"\n\nconst isStorageSupported = typeof Storage !== \"undefined\"\nexport const storageKey = \"chakra-ui-color-mode\"\n\nexport interface StorageManager {\n  get(init?: ColorMode): ColorMode | undefined\n  set(value: ColorMode): void\n}\n\n/**\n * Simple object to handle read-write to localStorage\n */\nexport const localStorageManager: StorageManager = {\n  get(init?) {\n    const exist =\n      isStorageSupported && !!window.localStorage.getItem(storageKey)\n\n    const value = exist ? window.localStorage.getItem(storageKey) : init\n\n    return value as ColorMode | undefined\n  },\n  set(value) {\n    if (isStorageSupported) {\n      window.localStorage.setItem(storageKey, value)\n    }\n  },\n}\n\n/**\n * Simple object to handle read-write to cookies\n */\nexport const cookieStorageManager = (cookies: string): StorageManager => ({\n  get(init?) {\n    const match = cookies.match(new RegExp(`(^| )${storageKey}=([^;]+)`))\n\n    const value = match ? match[2] : init\n\n    return value as ColorMode | undefined\n  },\n  set(value) {\n    document.cookie = `${storageKey}=${value}; max-age=31536000;`\n  },\n})\n"],"file":"storage-manager.js"}