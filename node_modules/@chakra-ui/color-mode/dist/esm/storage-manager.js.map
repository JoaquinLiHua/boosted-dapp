{"version":3,"sources":["../../src/storage-manager.ts"],"names":["isStorageSupported","Storage","storageKey","localStorageManager","get","init","exist","window","localStorage","getItem","value","set","setItem","cookieStorageManager","cookies","match","RegExp","document","cookie"],"mappings":"AAEA,IAAMA,kBAAkB,GAAG,OAAOC,OAAP,KAAmB,WAA9C;AACA,OAAO,IAAMC,UAAU,GAAG,sBAAnB;;AAOP;;;AAGA,OAAO,IAAMC,mBAAmC,GAAG;AACjDC,EAAAA,GAAG,CAACC,IAAD,EAAQ;AACT,QAAMC,KAAK,GACTN,kBAAkB,IAAI,CAAC,CAACO,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BP,UAA5B,CAD1B;AAGA,QAAMQ,KAAK,GAAGJ,KAAK,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BP,UAA5B,CAAH,GAA6CG,IAAhE;AAEA,WAAOK,KAAP;AACD,GARgD;;AASjDC,EAAAA,GAAG,CAACD,KAAD,EAAQ;AACT,QAAIV,kBAAJ,EAAwB;AACtBO,MAAAA,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4BV,UAA5B,EAAwCQ,KAAxC;AACD;AACF;;AAbgD,CAA5C;AAgBP;;;;AAGA,OAAO,IAAMG,oBAAoB,GAAIC,OAAD,KAAsC;AACxEV,EAAAA,GAAG,CAACC,IAAD,EAAQ;AACT,QAAMU,KAAK,GAAGD,OAAO,CAACC,KAAR,CAAc,IAAIC,MAAJ,WAAmBd,UAAnB,cAAd,CAAd;AAEA,QAAMQ,KAAK,GAAGK,KAAK,GAAGA,KAAK,CAAC,CAAD,CAAR,GAAcV,IAAjC;AAEA,WAAOK,KAAP;AACD,GAPuE;;AAQxEC,EAAAA,GAAG,CAACD,KAAD,EAAQ;AACTO,IAAAA,QAAQ,CAACC,MAAT,GAAqBhB,UAArB,SAAmCQ,KAAnC;AACD;;AAVuE,CAAtC,CAA7B","sourcesContent":["import { ColorMode } from \"./color-mode.utils\"\n\nconst isStorageSupported = typeof Storage !== \"undefined\"\nexport const storageKey = \"chakra-ui-color-mode\"\n\nexport interface StorageManager {\n  get(init?: ColorMode): ColorMode | undefined\n  set(value: ColorMode): void\n}\n\n/**\n * Simple object to handle read-write to localStorage\n */\nexport const localStorageManager: StorageManager = {\n  get(init?) {\n    const exist =\n      isStorageSupported && !!window.localStorage.getItem(storageKey)\n\n    const value = exist ? window.localStorage.getItem(storageKey) : init\n\n    return value as ColorMode | undefined\n  },\n  set(value) {\n    if (isStorageSupported) {\n      window.localStorage.setItem(storageKey, value)\n    }\n  },\n}\n\n/**\n * Simple object to handle read-write to cookies\n */\nexport const cookieStorageManager = (cookies: string): StorageManager => ({\n  get(init?) {\n    const match = cookies.match(new RegExp(`(^| )${storageKey}=([^;]+)`))\n\n    const value = match ? match[2] : init\n\n    return value as ColorMode | undefined\n  },\n  set(value) {\n    document.cookie = `${storageKey}=${value}; max-age=31536000;`\n  },\n})\n"],"file":"storage-manager.js"}